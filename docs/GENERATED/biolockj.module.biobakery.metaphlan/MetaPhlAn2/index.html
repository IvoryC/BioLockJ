<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Ivory Blakley">
  <link rel="shortcut icon" href="../../../img/favicon.ico">
  <title>MetaPhlAn2 - BioLockJ User Guide</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "MetaPhlAn2";
    var mkdocs_page_input_path = "GENERATED/biolockj.module.biobakery.metaphlan/MetaPhlAn2.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> BioLockJ User Guide</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../Getting-Started/">Getting Started</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Pipeline Componenets</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../Configuration/">Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../General-Properties/">General Properties</a>
                </li>
                <li class="">
                    
    <a class="" href="../../all-modules/">Modules</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Metadata/">Metadata</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../Dependencies/">Dependencies</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Configuration Details</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../Cluster/">cluster</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Docker/">docker</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Input/">input</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Metadata/">metadata</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../R/">r</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Report.md">report</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Script/">script</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Validation/">validation</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Features</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../Commands/">Commands</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../Check-Dependencies/">Check Dependencies</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../Failure-Recovery/">Failure Recovery</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Validation/">Validation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../Building-Modules/">Building Modules</a>
                </li>
                <li class="">
                    
    <a class="" href="../../BioLockJ-Api/">BioLockJ API</a>
                </li>
                <li class="">
                    
    <a class="" href="../../biolockj-help/">BioLockJ help menu</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../Supported-Environments/">Environments</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../Example-Pipeline/">Example Pipeline</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../FAQ/">FAQ & Troubleshooting</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">BioLockJ User Guide</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
    
    <li>MetaPhlAn2</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="metaphlan2">MetaPhlAn2<a class="headerlink" href="#metaphlan2" title="Permanent link">#</a></h1>
<p>Add to module run order:                  <br />
<code>#BioModule biolockj.module.biobakery.metaphlan.MetaPhlAn2</code></p>
<h2 id="description">Description<a class="headerlink" href="#description" title="Permanent link">#</a></h2>
<p>Profile the composition of microbial communities using <a href="https://github.com/biobakery/MetaPhlAn">MetaPhlAn</a>.</p>
<h2 id="properties">Properties<a class="headerlink" href="#properties" title="Permanent link">#</a></h2>
<p><em>Properties are the <code>name=value</code> pairs in the <a href="../../../Configuration#properties">configuration</a> file.</em>                   </p>
<h3 id="metaphlan2-properties">MetaPhlAn2 properties:<a class="headerlink" href="#metaphlan2-properties" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th align="left">Property</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><em>exe.bowtie2</em></td>
<td align="left"><em>executable</em> <br>Path for the "bowtie2" executable; if not supplied, any script that needs the bowtie2 command will assume it is on the PATH.<br><em>default:</em>  <em>null</em></td>
</tr>
<tr>
<td align="left"><em>exe.bowtie2build</em></td>
<td align="left"><em>executable</em> <br>Path for the "bowtie2build" executable; if not supplied, any script that needs the bowtie2build command will assume it is on the PATH.<br><em>default:</em>  <em>null</em></td>
</tr>
<tr>
<td align="left"><em>exe.metaphlan</em></td>
<td align="left"><em>executable</em> <br>Path for the "metaphlan" executable; if not supplied, any script that needs the metaphlan command will assume it is on the PATH.<br><em>default:</em>  <em>null</em></td>
</tr>
<tr>
<td align="left"><em>metaphlan.checkParams</em></td>
<td align="left"><em>boolean</em> <br>Should BioLockJ check the user-provided parameters to metaphlan2.<br><em>default:</em>  Y</td>
</tr>
<tr>
<td align="left"><em>metaphlan.consistentModules</em></td>
<td align="left"><em>boolean</em> <br>Ensure same core settings for modules in the in the metaphlan2 family in the same pipeline.<br><em>default:</em>  Y</td>
</tr>
<tr>
<td align="left"><em>metaphlan.mpa_dir</em></td>
<td align="left"><em>file path</em> <br>The path to the metaphlan directory. To use the mpa_dir environment variable, use <code>${mpa_dir}</code>.<br><em>default:</em>  <em>null</em></td>
</tr>
<tr>
<td align="left"><em>metaphlan.params</em></td>
<td align="left"><em>string</em> <br>Additional parameters to use with metaphlan2. Several options are handled specially. See details.<br><em>default:</em>  <em>null</em></td>
</tr>
</tbody>
</table>
<h3 id="general-properties-applicable-to-this-module">General properties applicable to this module:<a class="headerlink" href="#general-properties-applicable-to-this-module" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th align="left">Property</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><em>cluster.batchCommand</em></td>
<td align="left"><em>string</em> <br>Terminal command used to submit jobs on the cluster<br><em>default:</em>  <em>null</em></td>
</tr>
<tr>
<td align="left"><em>cluster.jobHeader</em></td>
<td align="left"><em>string</em> <br>Header written at top of worker scripts<br><em>default:</em>  <em>null</em></td>
</tr>
<tr>
<td align="left"><em>cluster.modules</em></td>
<td align="left"><em>list</em> <br>List of cluster modules to load at start of worker scripts<br><em>default:</em>  <em>null</em></td>
</tr>
<tr>
<td align="left"><em>cluster.prologue</em></td>
<td align="left"><em>string</em> <br>To run at the start of every script after loading cluster modules (if any)<br><em>default:</em>  <em>null</em></td>
</tr>
<tr>
<td align="left"><em>cluster.statusCommand</em></td>
<td align="left"><em>string</em> <br>Terminal command used to check the status of jobs on the cluster<br><em>default:</em>  <em>null</em></td>
</tr>
<tr>
<td align="left"><em>docker.saveContainerOnExit</em></td>
<td align="left"><em>boolean</em> <br>If Y, docker run command will NOT include the --rm flag<br><em>default:</em>  <em>null</em></td>
</tr>
<tr>
<td align="left"><em>docker.verifyImage</em></td>
<td align="left"><em>boolean</em> <br>In check dependencies, run a test to verify the docker image.<br><em>default:</em>  <em>null</em></td>
</tr>
<tr>
<td align="left"><em>script.defaultHeader</em></td>
<td align="left"><em>string</em> <br>Store default script header for MAIN script and locally run WORKER scripts.<br><em>default:</em>  #!/bin/bash</td>
</tr>
<tr>
<td align="left"><em>script.numThreads</em></td>
<td align="left"><em>integer</em> <br>Used to reserve cluster resources and passed to any external application call that accepts a numThreads parameter.<br><em>default:</em>  8</td>
</tr>
<tr>
<td align="left"><em>script.numWorkers</em></td>
<td align="left"><em>integer</em> <br>Set number of samples to process per script (if parallel processing)<br><em>default:</em>  1</td>
</tr>
<tr>
<td align="left"><em>script.permissions</em></td>
<td align="left"><em>string</em> <br>Used as chmod permission parameter (ex: 774)<br><em>default:</em>  770</td>
</tr>
<tr>
<td align="left"><em>script.timeout</em></td>
<td align="left"><em>integer</em> <br>Sets # of minutes before worker scripts times out.<br><em>default:</em>  <em>null</em></td>
</tr>
</tbody>
</table>
<h2 id="details">Details<a class="headerlink" href="#details" title="Permanent link">#</a></h2>
<p><em>version: 0.0.0</em> 
<a href="https://github.com/biobakery/MetaPhlAn">MetaPhlAn</a> is one of many tools in the BioBakery project.This module facilitates using MetaPhlAn2 as part of a BioLockJ pipeline.                 <br />
Arguments to be used be passed to MetaPhlAn can be added via the <em>metaphlan.params</em> property.                 <br />
The input and output locations will be specified automatically by BioLockJ.  Outputs are named using the <sample id><em><analysis type>.txt .The MetaPhlAn2 analsyis type is rel_ab_w_read_stats by default, but can be specified in _metaphlan.params</em>. --nproc will be set based on the <em>script.numThreads</em> property and cannot be included in the <em>metaphlan.params</em> value.                  <br />
If <em>metaphlan.checkParams=Y</em> then BioLockJ will review the params for metaphlan to check for common problems.BioLockJ will check that if any of these arguments are used there is a value: --input_type, --mpa_pkl, --bowtie2db, -x, --bt2_ps, --tmp_dir, --bowtie2_exe, --bowtie2_build, --bowtie2out, --tax_lev, --stat_q, --ignore_markers, -t, --nreads, --pres_th, -o, --sample_id_key, --sample_id, -s, --samout, --biom, --biom_output_file, --mdelim, --metadata_delimiter_char, --nproc, --read_min_len, --min_cu_len, --min_alignment_len, --stat, --clade, --min_abBioLockJ will check that if any of these arguments are used there is no following value: --no_map, --ignore_viruses, --ignore_eukaryotes, --ignore_bacteria, --ignore_archaea, --avoid_disqm, --install, -v, --version, -h, --helpThese properties are set using specific BioLockJ properties: -o, --nproc, --bowtie2db, --mpa_pklBioLockJ will also check to ensure there are no arguments that do not match the recognized set (these are typically mistakes) and no arugments that would prevent the program from running (such as -v or -h ).This check is done during check dependences, before the first module starts.</p>
<h2 id="adds-modules">Adds modules<a class="headerlink" href="#adds-modules" title="Permanent link">#</a></h2>
<p><strong>pre-requisite modules</strong>                  <br />
<em>none found</em>                 <br />
<strong>post-requisite modules</strong>                  <br />
<em>none found</em>                   </p>
<h2 id="docker">Docker<a class="headerlink" href="#docker" title="Permanent link">#</a></h2>
<p>If running in docker, this module will run in a docker container from this image:<br></p>
<pre><code>biobakery/metaphlan2:2.7.7_cloud_r1
</code></pre>

<p>This can be modified using the following properties:<br>
<code>MetaPhlAn2.imageOwner</code><br>
<code>MetaPhlAn2.imageName</code><br>
<code>MetaPhlAn2.imageTag</code><br></p>
<h2 id="citation">Citation<a class="headerlink" href="#citation" title="Permanent link">#</a></h2>
<p>The BioLockJ module was developed by Ivory Blakley to facilitate using MetaPhlan2.                 <br />
To cite MetaPhlan2, please cite:                  <br />
Integrating taxonomic, functional, and strain-level profiling of diverse microbial communities with bioBakery 3 Francesco Beghini, Lauren J McIver, Aitor Blanco-Míguez, Leonard Dubois, Francesco Asnicar, Sagun Maharjan, Ana Mailyan, Paolo Manghi, Matthias Scholz, Andrew Maltez Thomas, Mireia Valles-Colomer, George Weingart, Yancong Zhang, Moreno Zolfo, Curtis Huttenhower, Eric A Franzosa, Nicola Segata. eLife (2021)</p>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Fodor Lab of UNCC</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
    </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
      <script src="../../../search/main.js" defer></script>

</body>
</html>
